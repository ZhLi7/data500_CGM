# AIREADI — CGM final project

This repository contains a small sample of the AIREADI study data and example code/notebooks used to produce the final project report.

High-level layout
- `particiants.Rmd` — R Markdown report that generates the final HTML report (table + figures summarizing participant-level data availability and clinical summaries).
- `particiants.html` — (generated) last-built HTML version of the report (if present).
- `data/` — data used by the report; includes `participants.tsv`, `clinical_data/`, and the wearable CGM JSON folders under `wearable_blood_glucose/continuous_glucose_monitoring/dexcom_g6/`.
- `codes/` — supporting code and notebooks used to generate example figures and demonstrations.
	- `codes/plot_cgm_examples.py` — script that generates CGM example plots (saved to `codes/outputs/`).
	- `codes/plot_cgm_examples.ipynb` — a small notebook wrapper that runs the script interactively.
	- `codes/outputs/` — generated PNG figure outputs (example CGM plots for five participants).
	- `codes/demo_notebook.ipynb` — a demo notebook showing how to load CGM JSON and match clinical rows for the subset.

Quick goals and where things live
- Final report (table + static figures): generated from `particiants.Rmd` (root). The code that creates the required summary table is in `particiants.Rmd` (the R chunk that computes `avail_summary` and `sg_tbl`).
- Required figure (CGM time-series examples): generated by `codes/plot_cgm_examples.py` (the script in `codes/`); the images are saved to `codes/outputs/{participant_id}.png`.

How to regenerate the final report (recommended)
1. From the repository root, build the figures and render the report using the provided Makefile (recommended):

```bash
# from repo root
make report
```

2. What the Makefile does:
- `make figures` — runs the Python script `codes/plot_cgm_examples.py` to create example CGM PNGs in `codes/outputs/`.
- `make report` — runs `make figures` then calls R to render `particiants.Rmd` to HTML (`particiants.html`).
- `make clean` — removes generated outputs (HTML and example PNGs).

Notes and assumptions
- Participant "name" is not present; plots use `participant_id` as the label. Age and `study_group` come from `data/participants.tsv` used by `particiants.Rmd` and the plotting script.
- The R Markdown uses the following R packages: tidyverse, janitor, readr, knitr, kableExtra, scales, lubridate, glue. `particiants.Rmd` installs missing packages automatically when run (quietly).
- The plotting script uses the repository Python venv when run via the Makefile (it calls `./.venv/bin/python`); make sure the `.venv` exists or run the script with your Python manually.

Where to find the code that generates the required artifacts
- Required summary table: `particiants.Rmd` — R chunk labeled (summarize availability) builds `avail_summary` and the study-group table `sg_tbl`.
- Required example figure(s): `codes/plot_cgm_examples.py` — loads Dexcom JSON and saves PNGs under `codes/outputs/`.

If you want changes
- To change which participants are plotted, edit `codes/plot_cgm_examples.py` (the script selects the first five participant folders by default).
- To point the Rmd at a different participants file, update the path in the Rmd `read_tsv` call (it uses `here::here("data/participants.tsv")` by default).

Contact / author
- Author: Zhongyu Li
